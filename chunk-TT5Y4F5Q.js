import{c as Z,d as J}from"./chunk-JKGDERCN.js";import{M as V,N as j,O as q,P as z,Q as k}from"./chunk-QY7KXSDI.js";import{c as Q,d as X,e as $,f as ee,g as te}from"./chunk-ERUZ4UFU.js";import{Aa as h,B as M,Ba as E,C as b,Ca as T,Fa as C,H as u,I as _,Lb as Y,Ma as a,Na as l,U as o,V as O,Xb as K,ba as f,bb as x,da as s,e as A,fa as y,fb as W,ha as r,ia as m,na as B,oa as P,pa as d,qa as G,ra as U,wb as D,x as w,xa as g,ya as S,za as R,zb as H}from"./chunk-UH7LMHMT.js";var oe=["*"];function se(t,i){t&1&&(r(0,"span",3),g(1,"*"),m())}var L=class t{label;required=!1;error;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-label-wrapper"]],inputs:{label:"label",required:"required",error:"error"},ngContentSelectors:oe,decls:6,vars:3,consts:[[1,"label"],["class","required",4,"ngIf"],[1,"error"],[1,"required"]],template:function(e,p){e&1&&(G(),r(0,"label",0),g(1),f(2,se,2,0,"span",1),m(),U(3),r(4,"span",2),g(5),m()),e&2&&(o(),S(p.label),o(),s("ngIf",p.required),o(3),S(p.error))},dependencies:[x],styles:[".label[_ngcontent-%COMP%]{display:block;margin:4px}.required[_ngcontent-%COMP%]{color:var(--red-500)}.error[_ngcontent-%COMP%]{display:block;margin:4px;color:var(--red-500)}"]})};var v=()=>({width:"100%"});function ae(t,i){if(t&1&&(r(0,"div",12)(1,"span"),g(2),m(),r(3,"strong"),g(4),m()()),t&2){let e=i.$implicit;o(2),S(e.country),o(2),S(e.short)}}function le(t,i){if(t&1&&(g(0),a(1,"titlecase")),t&2){let e=d(2);R(" ",l(1,1,e.settings.theme)," ")}}function ce(t,i){if(t&1&&(g(0),a(1,"titlecase")),t&2){let e=i.$implicit;R(" ",l(1,1,e)," ")}}function me(t,i){if(t&1){let e=B();r(0,"div",4)(1,"app-label-wrapper",5),a(2,"translate"),a(3,"translate"),r(4,"p-autoComplete",6),a(5,"translate"),T("ngModelChange",function(n){u(e);let c=d();return E(c.settings.currency,n)||(c.settings.currency=n),_(n)}),P("completeMethod",function(n){u(e);let c=d();return _(c.searchCurrency(n))}),f(6,ae,5,2,"ng-template",7),m()(),r(7,"app-label-wrapper",8),a(8,"translate"),a(9,"translate"),r(10,"p-dropdown",9),a(11,"translate"),T("ngModelChange",function(n){u(e);let c=d();return E(c.settings.theme,n)||(c.settings.theme=n),_(n)}),f(12,le,2,3,"ng-template",10)(13,ce,2,3,"ng-template",7),m()(),r(14,"app-label-wrapper",8),a(15,"translate"),a(16,"translate"),r(17,"p-dropdown",11),a(18,"translate"),T("ngModelChange",function(n){u(e);let c=d();return E(c.settings.language,n)||(c.settings.language=n),_(n)}),m()(),r(19,"app-label-wrapper",8),a(20,"translate"),a(21,"translate"),r(22,"p-dropdown",9),a(23,"translate"),T("ngModelChange",function(n){u(e);let c=d();return E(c.settings.fontSize,n)||(c.settings.fontSize=n),_(n)}),m()()()}if(t&2){let e=d();o(),s("label",l(2,32,"SETTINGS.DEFAULT_CURRENCY_LABEL"))("required",!0)("error",l(3,34,e.errors.currency)),o(3),y(C(56,v)),s("inputStyle",C(57,v)),h("ngModel",e.settings.currency),s("forceSelection",!0)("dropdown",!0)("suggestions",e.currencySuggestions)("placeholder",l(5,36,"SETTINGS.DEFAULT_CURRENCY_PLACEHOLDER")),o(3),s("label",l(8,38,"SETTINGS.DEFAULT_THEME_LABEL"))("error",l(9,40,e.errors.theme)),o(3),y(C(58,v)),s("options",e.themes),h("ngModel",e.settings.theme),s("placeholder",l(11,42,"SETTINGS.DEFAULT_THEME_PLACEHOLDER")),o(4),s("label",l(15,44,"SETTINGS.DEFAULT_LANGUAGE_LABEL"))("error",l(16,46,e.errors.language)),o(3),y(C(59,v)),s("options",e.languages),h("ngModel",e.settings.language),s("placeholder",l(18,48,"SETTINGS.DEFAULT_LANGUAGE_PLACEHOLDER")),o(2),s("label",l(20,50,"SETTINGS.DEFAULT_FONT_SIZE_LABEL"))("error",l(21,52,e.errors.fontSize)),o(3),y(C(60,v)),s("options",e.fontSizes),h("ngModel",e.settings.fontSize),s("placeholder",l(23,54,"SETTINGS.DEFAULT_FONT_SIZE_PLACEHOLDER"))}}var N=class t{constructor(i,e){this.settingsService=i;this.notificationService=e;this.getSettings()}currencies=j;currencySuggestions=[];themes=Object.values(z);languages=V;fontSizes=Object.values(q);settings;errors={};subSink=[];getSettings=()=>A(this,null,function*(){let i=this.settingsService.settings$.subscribe(e=>{this.settings=e??new k});this.subSink.push(i)});searchCurrency=i=>{this.currencySuggestions=this.currencies.filter(e=>{let p=i.query.toLowerCase();return e.country.toLowerCase().includes(p)||e.short.toLowerCase().includes(p)||e.name.toLowerCase().includes(p)})};isValid=()=>(this.errors={},this.settings?.currency||(this.errors.currency="SETTINGS.DEFAULT_CURRENCY_ERROR"),this.settings?.theme||(this.errors.theme="SETTINGS.DEFAULT_THEME_ERROR"),this.settings?.language||(this.errors.language="SETTINGS.DEFAULT_LANGUAGE_ERROR"),this.settings?.fontSize||(this.errors.fontSize="SETTINGS.FONT_SIZE_ERROR"),Object.values(this.errors).length===0);preview=()=>{};save=()=>A(this,null,function*(){!this.settings||!this.isValid()||(yield this.settingsService.saveSettings(this.settings))});ngOnDestroy=()=>{this.subSink.forEach(i=>i.unsubscribe())};static \u0275fac=function(e){return new(e||t)(O(J),O(Z))};static \u0275cmp=M({type:t,selectors:[["app-settings"]],decls:5,vars:1,consts:[[1,"settings-container"],["class","settings-grid",4,"ngIf"],[1,"actions-wrapper"],[3,"onClick"],[1,"settings-grid"],[3,"label","required","error"],["optionLabel","short",3,"ngModelChange","completeMethod","inputStyle","ngModel","forceSelection","dropdown","suggestions","placeholder"],["pTemplate","item"],[3,"label","error"],[3,"ngModelChange","options","ngModel","placeholder"],["pTemplate","selectedItem"],["optionLabel","name",3,"ngModelChange","options","ngModel","placeholder"],[1,"currency-item"]],template:function(e,p){e&1&&(r(0,"div",0),f(1,me,24,61,"div",1),r(2,"div",2)(3,"p-button",3),P("onClick",function(){return p.save()}),g(4,"Save"),m()()()),e&2&&(o(),s("ngIf",p.settings))},dependencies:[x,Q,X,K,Y,$,ee,L,W,H],styles:[".settings-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}.settings-container[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]{display:grid;grid-gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:.75rem}.settings-container[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.settings-container[_ngcontent-%COMP%]   .currency-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1}.settings-container[_ngcontent-%COMP%]   .actions-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:8px}"]})};var ge=[{path:"",component:N}],I=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=b({type:t});static \u0275inj=w({imports:[D.forChild(ge),D]})};var ie=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=b({type:t});static \u0275inj=w({imports:[te,I]})};export{ie as SettingsModule};
