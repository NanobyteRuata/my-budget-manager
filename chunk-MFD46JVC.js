import{m as j}from"./chunk-EDYTMDV7.js";import"./chunk-BRULYD2Q.js";import{d as k,e as q,f as Y,i as Z,o as J,p as K}from"./chunk-BYPESI6U.js";import{Ba as M,C as A,Cb as N,D as E,Da as _,Db as O,Ea as S,Eb as G,Fa as f,Fb as P,Gb as U,Hb as V,I as d,Ia as T,J as u,Lb as W,Ra as r,Sa as o,V as l,W as R,_b as z,ca as x,e as v,ea as s,gb as F,ha as y,ja as m,ka as c,kb as B,kc as H,pa as I,qa as D,ra as g,x as C,za as h}from"./chunk-R7KBA722.js";var b=()=>({width:"100%"});function $(t,n){if(t&1&&(h(0),r(1,"titlecase")),t&2){let e=g(2);M(" ",o(1,1,e.settings.theme)," ")}}function ee(t,n){if(t&1&&(h(0),r(1,"titlecase")),t&2){let e=n.$implicit;M(" ",o(1,1,e)," ")}}function te(t,n){if(t&1){let e=I();m(0,"div",4)(1,"app-label-wrapper",5),r(2,"translate"),r(3,"translate"),m(4,"app-dropdown-currency",6),f("valueChange",function(i){d(e);let p=g();return S(p.settings.currency,i)||(p.settings.currency=i),u(i)}),c()(),m(5,"app-label-wrapper",7),r(6,"translate"),r(7,"translate"),m(8,"p-dropdown",8),r(9,"translate"),f("ngModelChange",function(i){d(e);let p=g();return S(p.settings.theme,i)||(p.settings.theme=i),u(i)}),x(10,$,2,3,"ng-template",9)(11,ee,2,3,"ng-template",10),c()(),m(12,"app-label-wrapper",7),r(13,"translate"),r(14,"translate"),m(15,"p-dropdown",11),r(16,"translate"),f("ngModelChange",function(i){d(e);let p=g();return S(p.settings.language,i)||(p.settings.language=i),u(i)}),c()(),m(17,"app-label-wrapper",7),r(18,"translate"),r(19,"translate"),m(20,"p-dropdown",8),r(21,"translate"),f("ngModelChange",function(i){d(e);let p=g();return S(p.settings.fontSize,i)||(p.settings.fontSize=i),u(i)}),c()()()}if(t&2){let e=g();l(),s("label",o(2,25,"SETTINGS.DEFAULT_CURRENCY_LABEL"))("required",!0)("error",o(3,27,e.errors.currency)),l(3),_("value",e.settings.currency),l(),s("label",o(6,29,"SETTINGS.DEFAULT_THEME_LABEL"))("error",o(7,31,e.errors.theme)),l(3),y(T(47,b)),s("options",e.themes),_("ngModel",e.settings.theme),s("placeholder",o(9,33,"SETTINGS.DEFAULT_THEME_PLACEHOLDER")),l(4),s("label",o(13,35,"SETTINGS.DEFAULT_LANGUAGE_LABEL"))("error",o(14,37,e.errors.language)),l(3),y(T(48,b)),s("options",e.languages),_("ngModel",e.settings.language),s("placeholder",o(16,39,"SETTINGS.DEFAULT_LANGUAGE_PLACEHOLDER")),l(2),s("label",o(18,41,"SETTINGS.DEFAULT_FONT_SIZE_LABEL"))("error",o(19,43,e.errors.fontSize)),l(3),y(T(49,b)),s("options",e.fontSizes),_("ngModel",e.settings.fontSize),s("placeholder",o(21,45,"SETTINGS.DEFAULT_FONT_SIZE_PLACEHOLDER"))}}var w=class t{constructor(n){this.settingsService=n;this.getSettings()}currencies=G;currencySuggestions=[];themes=Object.values(U);languages=O;fontSizes=Object.values(P);settings;errors={};subSink=[];getSettings=()=>v(this,null,function*(){let n=this.settingsService.settings$.subscribe(e=>{this.settings=e??new V});this.subSink.push(n)});searchCurrency=n=>{this.currencySuggestions=this.currencies.filter(e=>{let a=n.query.toLowerCase();return e.country.toLowerCase().includes(a)||e.short.toLowerCase().includes(a)||e.name.toLowerCase().includes(a)})};isValid=()=>(this.errors={},this.settings?.currency||(this.errors.currency="SETTINGS.DEFAULT_CURRENCY_ERROR"),this.settings?.theme||(this.errors.theme="SETTINGS.DEFAULT_THEME_ERROR"),this.settings?.language||(this.errors.language="SETTINGS.DEFAULT_LANGUAGE_ERROR"),this.settings?.fontSize||(this.errors.fontSize="SETTINGS.FONT_SIZE_ERROR"),Object.values(this.errors).length===0);preview=()=>{};save=()=>v(this,null,function*(){!this.settings||!this.isValid()||(yield this.settingsService.saveSettings(this.settings))});ngOnDestroy(){this.subSink.forEach(n=>n.unsubscribe())}static \u0275fac=function(e){return new(e||t)(R(j))};static \u0275cmp=A({type:t,selectors:[["app-settings"]],decls:5,vars:1,consts:[[1,"settings-container"],[1,"actions-wrapper"],[3,"onClick"],["class","settings-grid",4,"ngIf"],[1,"settings-grid"],[3,"label","required","error"],["placeholder","SETTINGS.DEFAULT_CURRENCY_PLACEHOLDER",3,"valueChange","value"],[3,"label","error"],[3,"ngModelChange","options","ngModel","placeholder"],["pTemplate","selectedItem"],["pTemplate","item"],["optionLabel","name",3,"ngModelChange","options","ngModel","placeholder"]],template:function(e,a){e&1&&(m(0,"div",0)(1,"div",1)(2,"p-button",2),D("onClick",function(){return a.save()}),h(3,"Save"),c()(),x(4,te,22,50,"div",3),c()),e&2&&(l(4),s("ngIf",a.settings))},dependencies:[F,k,q,H,z,Y,Z,J,B,W],styles:[".settings-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;gap:.75rem}.settings-container[_ngcontent-%COMP%]   .actions-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:8px}.settings-container[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]{display:grid;grid-gap:.75rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));margin-bottom:.75rem}"]})};var ie=[{path:"",component:w}],L=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=E({type:t});static \u0275inj=C({imports:[N.forChild(ie),N]})};var X=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=E({type:t});static \u0275inj=C({imports:[K,L]})};export{X as SettingsModule};
